<%#
 Copyright 2008 Steven Barth <steven@midlink.org>
 Copyright 2008-2016 Jo-Philipp Wich <jow@openwrt.org>
 Copyright 2012 David Menting <david@nut-bolt.nl>
 Licensed to the public under the Apache License 2.0.
-%>
<%
	local sys  = require "luci.sys"
	local util = require "luci.util"
	local http = require "luci.http"
	local disp = require "luci.dispatcher"
	local ver  = require "luci.version"

	local boardinfo = util.ubus("system", "board") or { }

	local node = disp.context.dispatched
	local path = table.concat(disp.context.path, "-")

	http.prepare_content("text/html; charset=UTF-8")
-%>
<!DOCTYPE html>
<html lang="<%=luci.i18n.context.lang%>">
	<head>
		<meta charset="utf-8">
		<title><%=striptags( (boardinfo.hostname or "?") .. ( (node and node.title) and ' - ' .. translate(node.title) or '')) %> - LuCI</title>
		<meta name="viewport" content="initial-scale=1.0">
		<link rel="stylesheet" href="<%=media%>/cascade.css?v=git-19.190.55614-35357e4">
		<link rel="stylesheet" media="only screen and (max-device-width: 854px)" href="<%=media%>/mobile.css?v=git-19.190.55614-35357e4" type="text/css" />
		<link rel="shortcut icon" href="<%=media%>/favicon.ico">
		<% if node and node.css then %>
			<link rel="stylesheet" href="<%=resource%>/<%=node.css%>">
		<% end -%>
		<% if css then %>
			<style title="text/css"><%= css %></style>
		<% end -%>
		<script src="<%=resource%>/cbi.js?v=git-19.190.55614-35357e4"></script>
		<script src="<%=resource%>/xhr.js?v=git-19.190.55614-35357e4"></script>
	</head>

	<body class="lang_<%=luci.i18n.context.lang%> <%- if node then %><%= striptags( node.title ) %><%- end %>">
		<header>
			<div class="fill">
				<div class="container">
					<a class="brand" href="/cgi-bin/luci/"><img src="<%=media%>/outdoorrouter.png" height="20px" style="padding-right: 8px; "><%=boardinfo.hostname or "?"%></a>
					<% render_topmenu() %>
					<div class="pull-right" id="content-desktop">
						<span id="xhr_poll_status" style="display:none" onclick="XHR.running() ? XHR.halt() : XHR.run()">
							<span class="label success" id="xhr_poll_status_on"><%:Refresh%> </span>
							<span class="label" id="xhr_poll_status_off" style="display:none"><%:Refresh%> </span>
						</span>
					</div>
				</div>
			</div>
		</header>

		<div id="maincontent" class="container">
			<%- if luci.sys.process.info("uid") == 0 and luci.sys.user.getuser("root") and not luci.sys.user.getpasswd("root") then -%>
				<div class="alert-message warning">
					<h4><%:No password set!%></h4>
					<p><%:You are using the default router password. Please custom your router password to protect the web interface and enable SSH.%></p>
					<div class="right"><a class="btn" href="<%=url("admin/system/admin")%>"><%:Custom router's admin password%></a></div>
				</div>
			<%- end -%>

			<noscript>
				<div class="alert-message warning">
					<h4><%:JavaScript required!%></h4>
					<p><%:Please enable JavaScript in your browser to ensure the router interface works properly.%></p>
				</div>
			</noscript>

			<% if category then render_tabmenu(category, cattree) end %>
